(()=>{var e={p:""};(()=>{"use strict";e.p=document.getElementById("webpack-public-path").innerText+"Js/"})(),StackExchange=window.StackExchange=window.StackExchange||{},StackOverflow=window.StackOverflow=window.StackOverflow||{},StackExchange.tagEditor=function(e,t){function n(){t.initialFocus=!0}if(t||(t={}),void 0===t.initialFocus&&(t.initialFocus=e.is(":focus")),!e.is(":visible")){var r=t.__tryNumber||0,a=$("body").is(":visible");return r<3?(t.__tryNumber=r+(a?1:0),e.bind("focus",n),void setTimeout((function(){e.unbind("focus",n),StackExchange.tagEditor(e,t)}),300)):void($("body.review-task-page").length||StackExchange.debug.log("tag box is invisible, couldn't start tag editor"))}var i=!!t.initialFocus,s=t.columns||3,o=void 0===t.excerpts||t.excerpts,l=void 0===t.learnMore||t.learnMore,c=e.attr("placeholder")||"",d=function(e){return window.tagRenderer(e,null,"span",t.useStacksClasses)},g=t.customFilterTags||function(e,n){var r={};return e.map((function(e){return!/^\s*$/.test(e)&&!0!==r[e]&&(t.operators&&t.operators.test(e)||(r[e]=!0),!0)}))},u=t.customExistingTags||function(e,t){return e},f=t.customSafeTags||function(e){var n,r=StackExchange.helpers.sanitizeAndSplitTags(e,!1,!!t.operators,t.allowUpperCaseTagNames)||[];return e&&$.trim(e)&&(n='safeTags("{0}") => {1}'.formatUnicorn(e,r.toString()),StackExchange.options.enableLogging&&(console.log("tag editor new: "+n),"string"!=typeof n&&console.log(n))),r},p=t.sanitizeSearchTerm||function(e){return f(e)[0]},h=$(),v=e.innerWidth(),m=$("<div class='js-tag-editor tag-editor multi-line' />").insertAfter(e);m.data("target-field",e.get(0)),t.extraTagEditorCssClass&&m.addClass(t.extraTagEditorCssClass),["padding-right","padding-left","box-sizing","margin-top","margin-bottom"].forEach((function(t){m.css(t,e.css(t))}));var b="border-box"===e.css("box-sizing");b&&(v+=parseInt(m.css("border-right-width"),10)+parseInt(m.css("border-left-width"),10));var x=t.suggestionsWidth||v,y=(x-12)/s|0,w=t.responsiveIsh&&y<150;m.css("width",v);var S=e.css("display");e.hide();var T=getComputedStyle(e[0]).width,k=/%$/.test(T);k&&m.css("width",T),"inline"===S&&m.css("display","inline-block");var C="selectionDirection"in e[0],E=d("test").appendTo(m),A=b?m.outerHeight():m.innerHeight(),_=e.innerHeight();E.remove(),b&&(_+=parseInt(m.css("border-top-width"),10)+parseInt(m.css("border-bottom-width"),10));var z=$("<span />").appendTo(m),j=$("<input type='text' autocomplete='off' tabIndex='0'/>").appendTo(m).val(e.val()+" ").attr("placeholder",c),D=$("<span />").appendTo(m),P=e.attr("tabIndex"),I=e.attr("id");if(I){var R=$("label[for='"+I+"']");if(R.length){var K="tageditor-replacing-"+I+"--input";j.attr("id",K),R.attr("for",K)}}P&&j.attr("tabIndex",P),e.hasClass("s-input")&&(m.addClass("s-input").css({paddingTop:0,paddingBottom:0}),j.addClass("s-input")),j.addClass("js-tageditor-replacing");var N,F=!1;function H(){if(!t.ignoreRequired){var e=StackExchange.tagEditor.requiredTags;if(e&&/^ ?$/.test(j.val())){var n=function(){if(void 0===N){for(var e=StackExchange.tagEditor.requiredTags,t=[],n=0;n<e.length;n++)t.push(J(e[n]).replace(/[.+]/g,"\\$&"));N=new RegExp("^(?:"+t.join("|")+")$")}return N}();0===z.add(D).children().filter((function(){return n.test($(this).text())})).length&&we(e)}}}function M(){return t.showAllWhenEmptyAndFocused&&V()}var U=i;j.focus((function(t,n){i=!0,H(),U||(n||e.triggerHandler("focus",!0),U=!0),M()&&ve(!0)}));var W=!1;function B(e,n){var r=d(e);if(t.tagMenus&&r.data("tag-menu-tagname",e),!n){if(r.hasClass("s-tag")){var a=$("<a>",{class:"js-delete-tag s-tag--dismiss",title:t.tooltipDeleteTag||__tr(["Remove tag"], undefined, "en", [])});a.append($("<svg class='svg-icon iconClearSm pe-none' width='14' height='14' viewBox='0 0 14 14'><path d='M12 3.41L10.59 2 7 5.59 3.41 2 2 3.41 5.59 7 2 10.59 3.41 12 7 8.41 10.59 12 12 10.59 8.41 7z'></path></svg>")),r.append(a)}else r.append($("<span>",{class:"js-delete-tag delete-tag",title:t.tooltipDeleteTag||__tr(["Remove tag"], undefined, "en", [])}));m.trigger("tagSpanCreated",[r])}return t.tagSpanCreated&&t.tagSpanCreated(r),r}function q(e){var t=$([]),n=$([]);switch(e){case G.all:t=z.find(".rendered-element"),n=D.find(".rendered-element");break;case G.left:t=z.find(".rendered-element:last");break;case G.right:n=D.find(".rendered-element:first");break;case G.all_left:t=z.find(".rendered-element");break;case G.all_right:n=D.find(".rendered-element")}return{pre:t,post:n}}function O(e){var t=q(e=e||G.all),n=t.pre.map((function(e,t){return $(t).text()})).get(),r=n.join(" ");r.length&&(r+=" ");var a=t.post.map((function(e,t){return $(t).text()})).get(),i=a.join(" ");i.length&&j.val().length&&(i=" "+i);var s=j.val();return n=n.concat(a),{text:r+j.val()+i,lengthBeforeInput:r.length,val:s,tags:n}}function L(t){t=t||O(),setTimeout((function(){e.trigger("tageditor:renderedchange",[t.tags,t.val])})),ce(),function(){if(ne)ne=!1;else{var e=m.find(".rendered-element").toArray().map((function(e){return $(e).text()}));0!==te.length&&(e&&e.length>0?ie.trigger(e,se):se())}}()}function V(){var e=j.val();return(""===e||" "===e)&&0===z.add(D).children().filter((function(){return!/^\s*$/.test($(this).text())})).length}function J(e){return t.getTagNameFromData?t.getTagNameFromData(e):e.Name}m.mousedown((function(){W=!0,$(document).one("mouseup",(function(){setTimeout((function(){i||(e.triggerHandler("blur"),U=!1),W=!1}),0)}))})),j.blur((function(t){i=!1,setTimeout((function(){F||(Ce(),Y(),W||(e.triggerHandler("blur"),U=!1)),W=!1}),0)})),e.focus((function(e,t){t||j.trigger("focus",!0)})),j.on({keydown:function(e){if(!C&&e.shiftKey&&fe[e.which]||e.ctrlKey&&65===e.which)return Q(),!0;var n,r,a,i=j.caret(),s="forward"===j[0].selectionDirection?i.end:i.start,o=s===j.val().length,l=0===s;switch(e.which){case 37:return!l||!(n=z.find(".rendered-element:last")).length||(e.shiftKey?Q(G.left):oe(n),e.shiftKey);case 39:return!o||!(r=D.find(".rendered-element:first")).length||(e.shiftKey?Q(G.right):oe(r,!0),e.shiftKey);case 8:return!l||!(n=z.find(".rendered-element:last")).length||(j.val(n.text()+j.val()),j.caret(n.text().length,n.text().length),n.remove(),L(),!1);case 46:return!o||!(r=D.find(".rendered-element:first")).length||(j.val(j.val()+r.text()),j.caret(s,s),r.remove(),L(),!1);case 38:if(de(-1,e.shiftKey))return!1;case 36:return!(n=z.find(".rendered-element:first")).length||(e.shiftKey?Q(G.all_left):oe(n,!0),e.shiftKey);case 40:var c=h.children("div:first");if(c.length)return pe(),c.focus(),!1;if(de(1,e.shiftKey))return!1;case 35:return!(r=D.find(".rendered-element:last")).length||(e.shiftKey?Q(G.all_right):oe(r),e.shiftKey);case 9:pe(),t.renderErrorTagIfNoResults&&!he()&&((a=f(j.val())[0])&&ke($("<span data-tag-name='"+a+"'/>")));break;case 13:if(he())return!1;break;case 32:if(t.allowSpaces)return!0;if(!1===t.spaceSelectsTopSuggestion)return!1;if(t.spaceSelectsTopSuggestion&&he())return ke(h.children("div:first")),!1}return!0},keyup:function(e){return!(27===e.which&&h.length>0)||(Ce(),e.preventDefault(!0),e.stopPropagation(),!1)},input:function(){setTimeout(Y,0)}}),m.delegate(".rendered-element","click",(function(e){var t=$(this);$(e.target).hasClass("js-delete-tag")&&t.text(""),oe(t),Y()})),m.click((function(e){e.target===this&&(oe(""),Y())})),m.on("rerender",(function(){Q(),Y(!0)}));var G={left:1,right:2,all_left:3,all_right:4,all:5};function Q(e){e=e||G.all;var t=j.caret(),n=j[0].selectionDirection,r=q(e);if(r.pre.add(r.post).length){var a=O(e);j.val(a.text),r.pre.remove(),r.post.remove(),j.caret(t.start+a.lengthBeforeInput,t.end+a.lengthBeforeInput),C&&(j[0].selectionDirection=n),Ce(),L()}}function X(e){if(t.operators&&t.operators.test(e))return $("<span class='rendered-element'/>").text(e);var n=B(e).addClass("rendered-element");return function(e){return!(t.invalid&&t.invalid[e]||t.isTagValid&&!t.isTagValid(e))}(e)||n.addClass("invalid-tag temp-tag__danger").attr("title",t.tooltipInvalidTag||__tr(["invalid tag"], undefined, "en", [])),n}function Y(n){if(!F){var r;if(-1==(r=n?{start:j.val().length,end:j.val().length}:j.caret()).start&&(r.start=r.end=0),!C&&r.start!==r.end)return Q(),void ce();var a=j.val(),s=a.substr(0,r.start),o=a.substr(r.end),l=j[0].selectionDirection,d=t.allowSpaces?/[,;]+/:/[,;\s]+/,u="function"==typeof t.customCleanUpSplit?t.customCleanUpSplit:function(e){return e.split(d)},p=u(s+"!");"!"===(p=(s+"!").split(d))[p.length-1]?p[p.length-1]="":p[p.length-1]=p[p.length-1].slice(0,-1);var h=u(o),v=p.pop(),b=v.length;v+=a.substring(r.start,r.end),v+=h.shift(),p=f(p.join(" ")),h=f(h.join(" "));var x,y=!!p.length||!!h.length;for(x=0;x<p.length;x++)X(p[x]).appendTo(z);for(x=0;x<h.length;x++)X(h[x]).appendTo(D);v!==j.val()&&j.val(v);var w=m.find(".rendered-element"),S=g(w.map((function(e,t){return $(t).text()})).get(),z.find(".rendered-element").length);x=0,w.filter((function(){return!S[x++]})).remove();var T=O(),k=$.trim(T.text);k!=e.val()&&(e.val(k).trigger("change"),StackExchange.MarkdownEditor&&!t.ignoreStyleCode&&styleCode.updateLangdivDelayed.trigger(k.split(/ /g))),y&&L(T),i&&(j.caret(b,b+r.end-r.start),C&&(j[0].selectionDirection=l),ve(),H()),ce(),V()?j.attr("placeholder")!==c&&j.attr("placeholder",c):""!==j.attr("placeholder")&&j.attr("placeholder","")}}function Z(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;const n=e.concat().sort(),r=t.concat().sort();for(var a=0;a<n.length;a++)if(n[a]!==r[a])return!1;return!0}var ee,te=m.closest(".js-tag-editor-container").find(".js-community-icons"),ne=!te.is(":empty"),re=[],ae=[],ie=StackExchange.helpers.DelayedReaction((function(e,t){Z(ae,e)?t(ee):(ae=e,StackExchange.helpers.addSpinner(m,{position:"absolute",right:10,top:_/2-2}),$.ajax({url:"/collectives/shared/get-communities-by-tags",data:{tags:e},traditional:!0}).done((function(e){ee=e,StackExchange.helpers.removeSpinner(),t(e)})))}),400,{sliding:!0});function se(e){if(!e||!e.subCommunities||0===e.subCommunities.length)return re=[],void te.empty();var t=e.subCommunities.map((function(e){return e.slug}));Z(re,t)||(re=t,te.html(e.fullHtml))}function oe(e,t,n,r){var a,s;if("string"==typeof e)s=e;else{if(!e.length)return;s=(a=e).text()}for(var o=f(j.val()),l=0;l<o.length;l++)X(o[l]).appendTo(z);if(j.val(s),a){var c=$($.unique(a.prevAll(".rendered-element").get()));a.nextAll(".rendered-element").prependTo(D),c.appendTo(z),a.remove()}else D.find(".rendered-element").appendTo(z);!i&&n||j.focus(),t&&j.caret(0,0),r||L()}var le={};function ce(){k&&(v=m.innerWidth());var e=function(e){var t="c_"+e.val();if(t in le)return le[t];var n=$("<span />").css({"font-family":e.css("font-family"),"font-size":e.css("font-size"),display:"inline-block"});n.text(e.val()),n.insertAfter(e);var r=n.innerWidth();return n.remove(),le[t]=r,r}(j)+19;z.outerWidth(),j.css("width",e);var t=j.position().top;t>0&&t+A<_||(t+m.scrollTop()+A<_?m.scrollTop(0):m.scrollTop(t-(_-A)/2+m.scrollTop()))}function de(e,t){var n;n=e>0?D.find("> *"):z.find("> *");for(var r,a,i=j.position(),s=j.val().length,o=s>0?j.caret().start/s:.5,l=i.left+j.width()*o,c=0;c<n.length;c++){var d=n.eq(e>0?c:n.length-c-1),g=d.position();if(void 0!==a){if(g.top!==a)break}else{if(!(Math.abs(g.top-i.top)>A/2))continue;a=g.top}var u=g.left+d.width()/2;if(e<0&&u<l||e>0&&u>l){r=r||d;break}r=d}if(r){if(t){for(;r.parent().length;)Q(e>0?G.right:G.left);j.caret(0,j.val().length)}else oe(r);return!0}return!1}var ge,ue,fe={35:!0,36:!0,37:!0,38:!0,39:!0,40:!0};function pe(){ge=!0,setTimeout((function(){ge=!1}),0)}function he(){return!!h.length&&!h.hasClass("no-results")}function ve(e){var n,r,a,s=p(j.val())||"";t.allowUpperCaseTagNames&&(s=s.toLocaleLowerCase()),(ue!==s||e)&&(ue=s,s.length||M()?(r=function(e){s===ue&&i&&we(e,s)},a=ye(n=s),be[a]?r(be[a]):xe.trigger(n,r)):Ce())}var me,be={},xe=StackExchange.helpers.DelayedReaction((function(e,n){StackExchange.helpers.addSpinner(m,{position:"absolute",right:10,top:_/2-2});var r=null;if(t.getDataPromise)r=t.getDataPromise(e);else{var a=$e(),i={q:e,newstyle:!0};r=$.get(a,i,"json")}r.done((function(t){be[ye(e)]=t,StackExchange.helpers.removeSpinner(),n(t)}))}),400,{sliding:!0});function $e(){return t.tagApiUrl||"/filter/tags"}function ye(e){return $e()+"|"+e}function we(e,n){h.remove(),F=!1;for(var r=m.height(),a=u(m.find(".rendered-element").map((function(e,t){return $(t).text()})).get(),z.find(".rendered-element").length),i=e.length-1;i>=0;i--)-1!==a.indexOf(J(e[i]))&&e.splice(i,1);var o=e.length;if(0===o)return h=$("<div class='tag-suggestions no-results box-border fs-cation fc-light c-default wmx100'>"+__tr(["No results found"], undefined, "en", [])+"</div>").css({position:"absolute",left:m.position().left,top:m.position().top+r+1+t.suggestionsTopMargin,width:x}).insertAfter(m),void(t.noResultsCallback&&t.noResultsCallback(h,n));h=$("<div class='tag-suggestions js-tag-suggestions box-border wmx100' />").css({position:"absolute",left:m.position().left,top:m.position().top+r+1+t.suggestionsTopMargin,width:x}).insertAfter(m),t.onCreatingTagSuggestions&&t.onCreatingTagSuggestions(a||[]);var l=t.suggestionTagBoxRenderer||Se;for(i=0;i<e.length;i++){var c=l(e[i],n).attr("tabindex",P||0).addClass("js-tag-suggestion").appendTo(h);Te(c),i%s!=0||w||c.css("clear","both")}h.on({keydown:Ae,keyup:_e,click:function(e){Ee(e)||(ke($(this)),e.stopPropagation())},focus:function(){ge&&1===o?ke($(this)):F=!0},blur:function(){F=!1}},".js-tag-suggestion")}function Se(e,n){var r=J(e),a=$("<div class='f:bs-ring outline-none' />").css("width",w?"auto":y).data("tag-name",(e.Negated?"not ":"")+(e.SynonymOf||r)),i=$("<div class='d-flex ai-center' />"),s=$("<div class='flex--item mr6' />");a.append(i),i.append(s),n&&(n=n.replace(/-/g,"").replace(/\*+/g,"\t").replace(/([^\t])(?=[^\t])/g,"$1-*").replace(/\+/g,"\\+").replace(/\./g,"\\.").replace(/\t/g,".*"));var c=t.operators&&t.operators.test(r),d=c?$('<span class="px4 fs-caption">').text(r):B(r,!0),g=d.html();if(n&&(g=g.replace(new RegExp("("+n+")"),"<span class='match'>$1</span>")),w&&d.addClass("m0"),e.Negated&&i.prepend($('<div class="flex--item mr6 fs-caption">').text("not")),s.append(d.html(g)),!e.Count||w||c||i.append($("<div class='flex--item fs-fine truncate mr6' />").html(e.Count)),o&&!w&&!c){var u="";if(e.Excerpt&&(u=e.Excerpt),u.length&&a.append($("<p class='mt6 mb0 v-truncate4 lh-md' />").text(u)),e.Synonyms&&e.Synonyms.length)for(var f=$("<p >"+__tr(["also:"], undefined, "en", [])+"</p>").appendTo(a),p=e.Synonyms.split(/\|/),h=0;h<p.length;h++)u=p[h],n&&(u=u.replace(new RegExp("("+n+")"),"<span class='match'>$1</span>")),h>0&&(u=", "+u),f.append("<span>"+u+"</span>")}if(l&&!w&&!c){var v=e.InfoUrl;v||(v=(e.IsDiverged?StackExchange.options.site.routePrefix:"")+"/tags/"+encodeURIComponent(e.SynonymOf||r)+"/info"),$('<a class="ml-auto flex--item s-btn s-btn__muted p2 js-tag-info-btn" target="_blank" />').attr("href",v).append(Svg.HelpSm).appendTo(i)}return a}function Te(e){var t=e.find("p.more-info");void 0===me&&(me=y-5-t.outerWidth()),e.find(".rendered-element:first").outerWidth()>me&&t.find("a").text(__tr(["info"], undefined, "en", []))}function ke(e){j.val(e.data("tag-name")),Ce(),oe(""),Y()}function Ce(){h.remove(),h=$(),F=!1,xe.cancel()}function Ee(e){return $(e.target).closest("a").length>0}function Ae(e){var n;switch(e.which){case 39:case 40:return $(this).next("div").focus(),!1;case 37:return $(this).prev("div").focus(),!1;case 38:return(n=$(this).prev("div")).length?n.focus():j.focus(),!1;case 13:if(Ee(e))break;return ke($(this)),!1;case 32:return t.spaceSelectsTopSuggestion&&ke($(this)),!1}}function _e(e){return 27!==e.which||(Ce(),j.focus(),e.stopPropagation(),!1)}Y(!0),StackExchange.tagEditor.ready.resolve(),e[0].func_clear=function(){e.val(""),j.val("").blur(),m.find(".rendered-element").remove()},e[0].func_add=function(e){var t=j.val();j.val(e),oe(t,!1,!0),Y()},e[0].func_finish=function(e){oe("")},e[0].func_redraw=function(t){var n=e.val();e.val(""),j.val("").blur(),m.find(".rendered-element").remove(),j.val(n),oe("",!1,!0,!t),Y()}},StackExchange.tagEditor.ready=$.Deferred()})();